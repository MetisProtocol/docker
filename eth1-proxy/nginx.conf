#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    upstream rpc {
        server 127.0.0.1:81;
        server 127.0.0.1:80 backup;
    }

    server {
        listen 127.0.0.1:80;
        location / {
            proxy_pass https://goerli.infura.io/v3/<APIKEY>;
        }
    }

    server {
        listen 127.0.0.1:81;
        location / {
            proxy_pass https://eth-goerli.alchemyapi.io/v2/<APIKEY>;
        }
    }

    server {
        listen 127.0.0.1:8545;

        location / {
            proxy_pass http://rpc;
        }
    }
}
